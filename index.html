<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Toast Proxy Browser</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background-color: #0b0d0f;
      color: #e6eef8;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background-color: #121417;
      padding: 0.5em;
      display: flex;
      align-items: center;
      border-bottom: 1px solid #1c1f23;
    }

    #urlInput {
      flex: 1;
      background: #181a1f;
      border: 1px solid #2a2d32;
      color: #e6eef8;
      border-radius: 8px;
      padding: 0.6em;
      font-size: 1em;
      outline: none;
    }

    #goBtn {
      margin-left: 0.5em;
      background: #1f6feb;
      color: white;
      border: none;
      padding: 0.6em 1em;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
    }

    #goBtn:hover {
      background: #316dff;
    }

    iframe {
      flex: 1;
      width: 100%;
      border: none;
      background: #0b0d0f;
    }

    footer {
      background-color: #121417;
      text-align: center;
      padding: 0.4em;
      font-size: 0.9em;
      color: #888;
    }

    footer span {
      color: #1f6feb;
    }
  </style>
</head>
<body>
  <header>
    <input type="text" id="urlInput" placeholder="Enter URL (e.g. https://example.com)" />
    <button id="goBtn">Go</button>
  </header>

  <iframe id="browserFrame" src=""></iframe>

  <footer>
    Toast Proxy Browser â€¢ Powered by <span>Puppeteer</span>
  </footer>

  <script>
    const input = document.getElementById('urlInput');
    const goBtn = document.getElementById('goBtn');
    const frame = document.getElementById('browserFrame');

    function normalizeUrl(url) {
      if (!/^https?:\/\//i.test(url)) {
        url = 'https://' + url;
      }
      return url;
    }

    function loadUrl() {
      const url = normalizeUrl(input.value.trim());
      if (url) {
        const encoded = encodeURIComponent(url);
        frame.src = `/proxy?url=${encoded}`;
        localStorage.setItem('toast_last_url', url);
      }
    }

    goBtn.addEventListener('click', loadUrl);
    input.addEventListener('keypress', e => {
      if (e.key === 'Enter') loadUrl();
    });

    window.addEventListener('load', () => {
      const last = localStorage.getItem('toast_last_url');
      if (last) {
        input.value = last;
        frame.src = `/proxy?url=${encodeURIComponent(last)}`;
      }
    });
  </script>
</body>
</html>
